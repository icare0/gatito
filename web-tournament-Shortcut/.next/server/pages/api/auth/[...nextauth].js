"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/discord":
/*!**********************************************!*\
  !*** external "next-auth/providers/discord" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/discord");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"connectToDatabase\": () => (/* binding */ connectToDatabase),\n/* harmony export */   \"convertDocToObj\": () => (/* binding */ convertDocToObj)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n// lib/mongodb.js\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nconst MONGODB_DB = process.env.MONGODB_DB;\n// Vérification des variables d'environnement\nif (!MONGODB_URI) {\n    throw new Error(\"Veuillez d\\xe9finir la variable d'environnement MONGODB_URI\");\n}\nif (!MONGODB_DB) {\n    throw new Error(\"Veuillez d\\xe9finir la variable d'environnement MONGODB_DB\");\n}\n/**\r\n * Global est utilisé ici pour maintenir la connexion à la base de données\r\n * entre les rechargements de hot-reloading en développement.\r\n * Cela évite de se connecter à la base de données à chaque requête API.\r\n */ let cached = global.mongo;\nif (!cached) {\n    cached = global.mongo = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectToDatabase() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            useNewUrlParser: true,\n            useUnifiedTopology: true\n        };\n        cached.promise = mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient.connect(MONGODB_URI, opts).then((client)=>{\n            return {\n                client,\n                db: client.db(MONGODB_DB)\n            };\n        });\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n// Fonction utilitaire pour convertir les _id en chaînes\nfunction convertDocToObj(doc) {\n    if (doc._id) {\n        doc.id = doc._id.toString();\n        delete doc._id;\n    }\n    return doc;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsaUJBQWlCO0FBQ3FCO0FBRXRDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUMzQyxNQUFNRyxhQUFhRixRQUFRQyxHQUFHLENBQUNDLFVBQVU7QUFFekMsNkNBQTZDO0FBQzdDLElBQUksQ0FBQ0gsYUFBYTtJQUNoQixNQUFNLElBQUlJLE1BQU0sK0RBQTZEO0FBQy9FLENBQUM7QUFFRCxJQUFJLENBQUNELFlBQVk7SUFDZixNQUFNLElBQUlDLE1BQU0sOERBQTREO0FBQzlFLENBQUM7QUFFRDs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBU0MsT0FBT0MsS0FBSztBQUV6QixJQUFJLENBQUNGLFFBQVE7SUFDWEEsU0FBU0MsT0FBT0MsS0FBSyxHQUFHO1FBQUVDLE1BQU0sSUFBSTtRQUFFQyxTQUFTLElBQUk7SUFBQztBQUN0RCxDQUFDO0FBRU0sZUFBZUMsb0JBQW9CO0lBQ3hDLElBQUlMLE9BQU9HLElBQUksRUFBRTtRQUNmLE9BQU9ILE9BQU9HLElBQUk7SUFDcEIsQ0FBQztJQUVELElBQUksQ0FBQ0gsT0FBT0ksT0FBTyxFQUFFO1FBQ25CLE1BQU1FLE9BQU87WUFDWEMsaUJBQWlCLElBQUk7WUFDckJDLG9CQUFvQixJQUFJO1FBQzFCO1FBRUFSLE9BQU9JLE9BQU8sR0FBR1Ysd0RBQW1CLENBQUNDLGFBQWFXLE1BQU1JLElBQUksQ0FBQyxDQUFDQyxTQUFXO1lBQ3ZFLE9BQU87Z0JBQ0xBO2dCQUNBQyxJQUFJRCxPQUFPQyxFQUFFLENBQUNkO1lBQ2hCO1FBQ0Y7SUFDRixDQUFDO0lBQ0RFLE9BQU9HLElBQUksR0FBRyxNQUFNSCxPQUFPSSxPQUFPO0lBQ2xDLE9BQU9KLE9BQU9HLElBQUk7QUFDcEIsQ0FBQztBQUVELHdEQUF3RDtBQUNqRCxTQUFTVSxnQkFBZ0JDLEdBQUcsRUFBRTtJQUNuQyxJQUFJQSxJQUFJQyxHQUFHLEVBQUU7UUFDWEQsSUFBSUUsRUFBRSxHQUFHRixJQUFJQyxHQUFHLENBQUNFLFFBQVE7UUFDekIsT0FBT0gsSUFBSUMsR0FBRztJQUNoQixDQUFDO0lBQ0QsT0FBT0Q7QUFDVCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLXBvY2tldGV4Ly4vbGliL21vbmdvZGIuanM/ZDkyMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvbW9uZ29kYi5qc1xyXG5pbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gJ21vbmdvZGInO1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuY29uc3QgTU9OR09EQl9EQiA9IHByb2Nlc3MuZW52Lk1PTkdPREJfREI7XHJcblxyXG4vLyBWw6lyaWZpY2F0aW9uIGRlcyB2YXJpYWJsZXMgZCdlbnZpcm9ubmVtZW50XHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ1ZldWlsbGV6IGTDqWZpbmlyIGxhIHZhcmlhYmxlIGRcXCdlbnZpcm9ubmVtZW50IE1PTkdPREJfVVJJJyk7XHJcbn1cclxuXHJcbmlmICghTU9OR09EQl9EQikge1xyXG4gIHRocm93IG5ldyBFcnJvcignVmV1aWxsZXogZMOpZmluaXIgbGEgdmFyaWFibGUgZFxcJ2Vudmlyb25uZW1lbnQgTU9OR09EQl9EQicpO1xyXG59XHJcblxyXG4vKipcclxuICogR2xvYmFsIGVzdCB1dGlsaXPDqSBpY2kgcG91ciBtYWludGVuaXIgbGEgY29ubmV4aW9uIMOgIGxhIGJhc2UgZGUgZG9ubsOpZXNcclxuICogZW50cmUgbGVzIHJlY2hhcmdlbWVudHMgZGUgaG90LXJlbG9hZGluZyBlbiBkw6l2ZWxvcHBlbWVudC5cclxuICogQ2VsYSDDqXZpdGUgZGUgc2UgY29ubmVjdGVyIMOgIGxhIGJhc2UgZGUgZG9ubsOpZXMgw6AgY2hhcXVlIHJlcXXDqnRlIEFQSS5cclxuICovXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ287XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nbyA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSB7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcclxuICAgIH07XHJcblxyXG4gICAgY2FjaGVkLnByb21pc2UgPSBNb25nb0NsaWVudC5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChjbGllbnQpID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjbGllbnQsXHJcbiAgICAgICAgZGI6IGNsaWVudC5kYihNT05HT0RCX0RCKSxcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xyXG4gIHJldHVybiBjYWNoZWQuY29ubjtcclxufVxyXG5cclxuLy8gRm9uY3Rpb24gdXRpbGl0YWlyZSBwb3VyIGNvbnZlcnRpciBsZXMgX2lkIGVuIGNoYcOubmVzXHJcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RG9jVG9PYmooZG9jKSB7XHJcbiAgaWYgKGRvYy5faWQpIHtcclxuICAgIGRvYy5pZCA9IGRvYy5faWQudG9TdHJpbmcoKTtcclxuICAgIGRlbGV0ZSBkb2MuX2lkO1xyXG4gIH1cclxuICByZXR1cm4gZG9jO1xyXG59Il0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9EQiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwibW9uZ28iLCJjb25uIiwicHJvbWlzZSIsImNvbm5lY3RUb0RhdGFiYXNlIiwib3B0cyIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3QiLCJ0aGVuIiwiY2xpZW50IiwiZGIiLCJjb252ZXJ0RG9jVG9PYmoiLCJkb2MiLCJfaWQiLCJpZCIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authOptions\": () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_discord__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/discord */ \"next-auth/providers/discord\");\n/* harmony import */ var next_auth_providers_discord__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_discord__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(api)/./lib/mongodb.js\");\n// pages/api/auth/[...nextauth].js\n\n\n\nconst authOptions = {\n    providers: [\n        next_auth_providers_discord__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.DISCORD_CLIENT_ID,\n            clientSecret: process.env.DISCORD_CLIENT_SECRET,\n            authorization: {\n                params: {\n                    scope: \"identify email\"\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token , account , profile  }) {\n            // Persist the Discord profile info to the token\n            if (account && profile) {\n                token.id = profile.id;\n                token.discord = profile;\n            }\n            return token;\n        },\n        async session ({ session , token  }) {\n            // Send properties to the client session\n            session.user.id = token.id;\n            session.user.discord = token.discord;\n            // Check if user exists in our database and fetch their role\n            try {\n                const { db  } = await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_2__.connectToDatabase)();\n                const user = await db.collection(\"users\").findOne({\n                    iduser: token.id\n                });\n                if (user) {\n                    session.user.dbUser = user;\n                    // Vérification explicite du rôle admin\n                    session.user.isAdmin = user.role === \"admin\";\n                    // Ajouter un log pour debug\n                    console.log(`User ${user.pseudo} (${token.id}) isAdmin: ${session.user.isAdmin}`);\n                } else {\n                    session.user.isAdmin = false;\n                }\n            } catch (error) {\n                console.error(\"Error fetching user data:\", error);\n                session.user.isAdmin = false;\n            }\n            return session;\n        },\n        async signIn ({ user , account , profile  }) {\n            try {\n                const { db  } = await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_2__.connectToDatabase)();\n                // Check if user exists in our database\n                const existingUser = await db.collection(\"users\").findOne({\n                    iduser: profile.id\n                });\n                if (!existingUser) {\n                    // Create a new user in our database\n                    await db.collection(\"users\").insertOne({\n                        iduser: profile.id,\n                        pseudo: profile.username || profile.name || `User${profile.id.slice(0, 6)}`,\n                        avatar: profile.avatar ? `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.png` : null,\n                        elo: 1000,\n                        victories: 0,\n                        totalMatches: 0,\n                        winRate: 0,\n                        rank: \"unranked\",\n                        role: \"user\",\n                        createdAt: new Date(),\n                        updatedAt: new Date()\n                    });\n                } else {\n                    // Update user's Discord info if it has changed\n                    const updateObj = {};\n                    if (profile.username && profile.username !== existingUser.pseudo && !existingUser.pseudoCustomized) {\n                        updateObj.pseudo = profile.username;\n                    }\n                    if (profile.avatar) {\n                        const avatarUrl = `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.png`;\n                        if (avatarUrl !== existingUser.avatar) {\n                            updateObj.avatar = avatarUrl;\n                        }\n                    }\n                    if (Object.keys(updateObj).length > 0) {\n                        updateObj.updatedAt = new Date();\n                        await db.collection(\"users\").updateOne({\n                            iduser: profile.id\n                        }, {\n                            $set: updateObj\n                        });\n                    }\n                }\n                return true;\n            } catch (error) {\n                console.error(\"Sign in error:\", error);\n                return false;\n            }\n        }\n    },\n    // Configuration pour HTTPS avec Cloudflare Tunnel\n    useSecureCookies: true,\n    trustHost: true,\n    cookies: {\n        sessionToken: {\n            name: `next-auth.session-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: true // Cookies uniquement via HTTPS\n            }\n        },\n        callbackUrl: {\n            name: `next-auth.callback-url`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: true\n            }\n        },\n        csrfToken: {\n            name: `next-auth.csrf-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: true\n            }\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxrQ0FBa0M7QUFDRDtBQUN5QjtBQUNEO0FBRWxELE1BQU1HLGNBQWM7SUFDekJDLFdBQVc7UUFDVEgsa0VBQWVBLENBQUM7WUFDZEksVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxpQkFBaUI7WUFDdkNDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO1lBQy9DQyxlQUFlO2dCQUFFQyxRQUFRO29CQUFFQyxPQUFPO2dCQUFpQjtZQUFFO1FBQ3ZEO0tBQ0Q7SUFDREMsV0FBVztRQUNULE1BQU1DLEtBQUksRUFBRUMsTUFBSyxFQUFFQyxRQUFPLEVBQUVDLFFBQU8sRUFBRSxFQUFFO1lBQ3JDLGdEQUFnRDtZQUNoRCxJQUFJRCxXQUFXQyxTQUFTO2dCQUN0QkYsTUFBTUcsRUFBRSxHQUFHRCxRQUFRQyxFQUFFO2dCQUNyQkgsTUFBTUksT0FBTyxHQUFHRjtZQUNsQixDQUFDO1lBQ0QsT0FBT0Y7UUFDVDtRQUNBLE1BQU1LLFNBQVEsRUFBRUEsUUFBTyxFQUFFTCxNQUFLLEVBQUUsRUFBRTtZQUNoQyx3Q0FBd0M7WUFDeENLLFFBQVFDLElBQUksQ0FBQ0gsRUFBRSxHQUFHSCxNQUFNRyxFQUFFO1lBQzFCRSxRQUFRQyxJQUFJLENBQUNGLE9BQU8sR0FBR0osTUFBTUksT0FBTztZQUVwQyw0REFBNEQ7WUFDNUQsSUFBSTtnQkFDRixNQUFNLEVBQUVHLEdBQUUsRUFBRSxHQUFHLE1BQU1yQiwrREFBaUJBO2dCQUN0QyxNQUFNb0IsT0FBTyxNQUFNQyxHQUFHQyxVQUFVLENBQUMsU0FBU0MsT0FBTyxDQUFDO29CQUFFQyxRQUFRVixNQUFNRyxFQUFFO2dCQUFDO2dCQUVyRSxJQUFJRyxNQUFNO29CQUNSRCxRQUFRQyxJQUFJLENBQUNLLE1BQU0sR0FBR0w7b0JBQ3RCLHVDQUF1QztvQkFDdkNELFFBQVFDLElBQUksQ0FBQ00sT0FBTyxHQUFHTixLQUFLTyxJQUFJLEtBQUs7b0JBRXJDLDRCQUE0QjtvQkFDNUJDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRVQsS0FBS1UsTUFBTSxDQUFDLEVBQUUsRUFBRWhCLE1BQU1HLEVBQUUsQ0FBQyxXQUFXLEVBQUVFLFFBQVFDLElBQUksQ0FBQ00sT0FBTyxDQUFDLENBQUM7Z0JBQ2xGLE9BQU87b0JBQ0xQLFFBQVFDLElBQUksQ0FBQ00sT0FBTyxHQUFHLEtBQUs7Z0JBQzlCLENBQUM7WUFDSCxFQUFFLE9BQU9LLE9BQU87Z0JBQ2RILFFBQVFHLEtBQUssQ0FBQyw2QkFBNkJBO2dCQUMzQ1osUUFBUUMsSUFBSSxDQUFDTSxPQUFPLEdBQUcsS0FBSztZQUM5QjtZQUVBLE9BQU9QO1FBQ1Q7UUFDQSxNQUFNYSxRQUFPLEVBQUVaLEtBQUksRUFBRUwsUUFBTyxFQUFFQyxRQUFPLEVBQUUsRUFBRTtZQUN2QyxJQUFJO2dCQUNGLE1BQU0sRUFBRUssR0FBRSxFQUFFLEdBQUcsTUFBTXJCLCtEQUFpQkE7Z0JBRXRDLHVDQUF1QztnQkFDdkMsTUFBTWlDLGVBQWUsTUFBTVosR0FBR0MsVUFBVSxDQUFDLFNBQVNDLE9BQU8sQ0FBQztvQkFBRUMsUUFBUVIsUUFBUUMsRUFBRTtnQkFBQztnQkFFL0UsSUFBSSxDQUFDZ0IsY0FBYztvQkFDakIsb0NBQW9DO29CQUNwQyxNQUFNWixHQUFHQyxVQUFVLENBQUMsU0FBU1ksU0FBUyxDQUFDO3dCQUNyQ1YsUUFBUVIsUUFBUUMsRUFBRTt3QkFDbEJhLFFBQVFkLFFBQVFtQixRQUFRLElBQUluQixRQUFRb0IsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFcEIsUUFBUUMsRUFBRSxDQUFDb0IsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDO3dCQUMzRUMsUUFBUXRCLFFBQVFzQixNQUFNLEdBQUcsQ0FBQyxtQ0FBbUMsRUFBRXRCLFFBQVFDLEVBQUUsQ0FBQyxDQUFDLEVBQUVELFFBQVFzQixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSTt3QkFDeEdDLEtBQUs7d0JBQ0xDLFdBQVc7d0JBQ1hDLGNBQWM7d0JBQ2RDLFNBQVM7d0JBQ1RDLE1BQU07d0JBQ05oQixNQUFNO3dCQUNOaUIsV0FBVyxJQUFJQzt3QkFDZkMsV0FBVyxJQUFJRDtvQkFDakI7Z0JBQ0YsT0FBTztvQkFDTCwrQ0FBK0M7b0JBQy9DLE1BQU1FLFlBQVksQ0FBQztvQkFFbkIsSUFBSS9CLFFBQVFtQixRQUFRLElBQUluQixRQUFRbUIsUUFBUSxLQUFLRixhQUFhSCxNQUFNLElBQUksQ0FBQ0csYUFBYWUsZ0JBQWdCLEVBQUU7d0JBQ2xHRCxVQUFVakIsTUFBTSxHQUFHZCxRQUFRbUIsUUFBUTtvQkFDckMsQ0FBQztvQkFFRCxJQUFJbkIsUUFBUXNCLE1BQU0sRUFBRTt3QkFDbEIsTUFBTVcsWUFBWSxDQUFDLG1DQUFtQyxFQUFFakMsUUFBUUMsRUFBRSxDQUFDLENBQUMsRUFBRUQsUUFBUXNCLE1BQU0sQ0FBQyxJQUFJLENBQUM7d0JBQzFGLElBQUlXLGNBQWNoQixhQUFhSyxNQUFNLEVBQUU7NEJBQ3JDUyxVQUFVVCxNQUFNLEdBQUdXO3dCQUNyQixDQUFDO29CQUNILENBQUM7b0JBRUQsSUFBSUMsT0FBT0MsSUFBSSxDQUFDSixXQUFXSyxNQUFNLEdBQUcsR0FBRzt3QkFDckNMLFVBQVVELFNBQVMsR0FBRyxJQUFJRDt3QkFDMUIsTUFBTXhCLEdBQUdDLFVBQVUsQ0FBQyxTQUFTK0IsU0FBUyxDQUNwQzs0QkFBRTdCLFFBQVFSLFFBQVFDLEVBQUU7d0JBQUMsR0FDckI7NEJBQUVxQyxNQUFNUDt3QkFBVTtvQkFFdEIsQ0FBQztnQkFDSCxDQUFDO2dCQUVELE9BQU8sSUFBSTtZQUNiLEVBQUUsT0FBT2hCLE9BQU87Z0JBQ2RILFFBQVFHLEtBQUssQ0FBQyxrQkFBa0JBO2dCQUNoQyxPQUFPLEtBQUs7WUFDZDtRQUNGO0lBQ0Y7SUFDQSxrREFBa0Q7SUFDbER3QixrQkFBa0IsSUFBSTtJQUN0QkMsV0FBVyxJQUFJO0lBQ2ZDLFNBQVM7UUFDUEMsY0FBYztZQUNadEIsTUFBTSxDQUFDLHVCQUF1QixDQUFDO1lBQy9CdUIsU0FBUztnQkFDUEMsVUFBVSxJQUFJO2dCQUNkQyxVQUFVO2dCQUNWQyxNQUFNO2dCQUNOQyxRQUFRLElBQUksQ0FBQywrQkFBK0I7WUFDOUM7UUFDRjtRQUNBQyxhQUFhO1lBQ1g1QixNQUFNLENBQUMsc0JBQXNCLENBQUM7WUFDOUJ1QixTQUFTO2dCQUNQQyxVQUFVLElBQUk7Z0JBQ2RDLFVBQVU7Z0JBQ1ZDLE1BQU07Z0JBQ05DLFFBQVEsSUFBSTtZQUNkO1FBQ0Y7UUFDQUUsV0FBVztZQUNUN0IsTUFBTSxDQUFDLG9CQUFvQixDQUFDO1lBQzVCdUIsU0FBUztnQkFDUEMsVUFBVSxJQUFJO2dCQUNkQyxVQUFVO2dCQUNWQyxNQUFNO2dCQUNOQyxRQUFRLElBQUk7WUFDZDtRQUNGO0lBQ0Y7SUFDQUcsT0FBTztRQUNMbEMsUUFBUTtRQUNSRCxPQUFPO0lBQ1Q7SUFDQVosU0FBUztRQUNQZ0QsVUFBVTtRQUNWQyxRQUFRLEtBQUssS0FBSyxLQUFLO0lBQ3pCO0lBQ0FDLFFBQVFqRSxRQUFRQyxHQUFHLENBQUNpRSxlQUFlO0FBQ3JDLEVBQUU7QUFFRixpRUFBZXhFLGdEQUFRQSxDQUFDRyxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLXBvY2tldGV4Ly4vcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS5qcz81MjdmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0uanNcclxuaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCc7XHJcbmltcG9ydCBEaXNjb3JkUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9kaXNjb3JkJztcclxuaW1wb3J0IHsgY29ubmVjdFRvRGF0YWJhc2UgfSBmcm9tICcuLi8uLi8uLi9saWIvbW9uZ29kYic7XHJcblxyXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnMgPSB7XHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBEaXNjb3JkUHJvdmlkZXIoe1xyXG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuRElTQ09SRF9DTElFTlRfSUQsXHJcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuRElTQ09SRF9DTElFTlRfU0VDUkVULFxyXG4gICAgICBhdXRob3JpemF0aW9uOiB7IHBhcmFtczogeyBzY29wZTogJ2lkZW50aWZ5IGVtYWlsJyB9IH0sXHJcbiAgICB9KSxcclxuICBdLFxyXG4gIGNhbGxiYWNrczoge1xyXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIGFjY291bnQsIHByb2ZpbGUgfSkge1xyXG4gICAgICAvLyBQZXJzaXN0IHRoZSBEaXNjb3JkIHByb2ZpbGUgaW5mbyB0byB0aGUgdG9rZW5cclxuICAgICAgaWYgKGFjY291bnQgJiYgcHJvZmlsZSkge1xyXG4gICAgICAgIHRva2VuLmlkID0gcHJvZmlsZS5pZDtcclxuICAgICAgICB0b2tlbi5kaXNjb3JkID0gcHJvZmlsZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcclxuICAgICAgLy8gU2VuZCBwcm9wZXJ0aWVzIHRvIHRoZSBjbGllbnQgc2Vzc2lvblxyXG4gICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZDtcclxuICAgICAgc2Vzc2lvbi51c2VyLmRpc2NvcmQgPSB0b2tlbi5kaXNjb3JkO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBleGlzdHMgaW4gb3VyIGRhdGFiYXNlIGFuZCBmZXRjaCB0aGVpciByb2xlXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgeyBkYiB9ID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5maW5kT25lKHsgaWR1c2VyOiB0b2tlbi5pZCB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgc2Vzc2lvbi51c2VyLmRiVXNlciA9IHVzZXI7XHJcbiAgICAgICAgICAvLyBWw6lyaWZpY2F0aW9uIGV4cGxpY2l0ZSBkdSByw7RsZSBhZG1pblxyXG4gICAgICAgICAgc2Vzc2lvbi51c2VyLmlzQWRtaW4gPSB1c2VyLnJvbGUgPT09ICdhZG1pbic7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFqb3V0ZXIgdW4gbG9nIHBvdXIgZGVidWdcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlci5wc2V1ZG99ICgke3Rva2VuLmlkfSkgaXNBZG1pbjogJHtzZXNzaW9uLnVzZXIuaXNBZG1pbn1gKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2Vzc2lvbi51c2VyLmlzQWRtaW4gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBkYXRhOicsIGVycm9yKTtcclxuICAgICAgICBzZXNzaW9uLnVzZXIuaXNBZG1pbiA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gc2Vzc2lvbjtcclxuICAgIH0sXHJcbiAgICBhc3luYyBzaWduSW4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlIH0pIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGRiIH0gPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgZXhpc3RzIGluIG91ciBkYXRhYmFzZVxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZE9uZSh7IGlkdXNlcjogcHJvZmlsZS5pZCB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xyXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHVzZXIgaW4gb3VyIGRhdGFiYXNlXHJcbiAgICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmluc2VydE9uZSh7XHJcbiAgICAgICAgICAgIGlkdXNlcjogcHJvZmlsZS5pZCxcclxuICAgICAgICAgICAgcHNldWRvOiBwcm9maWxlLnVzZXJuYW1lIHx8IHByb2ZpbGUubmFtZSB8fCBgVXNlciR7cHJvZmlsZS5pZC5zbGljZSgwLCA2KX1gLFxyXG4gICAgICAgICAgICBhdmF0YXI6IHByb2ZpbGUuYXZhdGFyID8gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHtwcm9maWxlLmlkfS8ke3Byb2ZpbGUuYXZhdGFyfS5wbmdgIDogbnVsbCxcclxuICAgICAgICAgICAgZWxvOiAxMDAwLFxyXG4gICAgICAgICAgICB2aWN0b3JpZXM6IDAsXHJcbiAgICAgICAgICAgIHRvdGFsTWF0Y2hlczogMCxcclxuICAgICAgICAgICAgd2luUmF0ZTogMCxcclxuICAgICAgICAgICAgcmFuazogJ3VucmFua2VkJyxcclxuICAgICAgICAgICAgcm9sZTogJ3VzZXInLCAvLyBEZWZhdWx0IHJvbGVcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBVcGRhdGUgdXNlcidzIERpc2NvcmQgaW5mbyBpZiBpdCBoYXMgY2hhbmdlZFxyXG4gICAgICAgICAgY29uc3QgdXBkYXRlT2JqID0ge307XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChwcm9maWxlLnVzZXJuYW1lICYmIHByb2ZpbGUudXNlcm5hbWUgIT09IGV4aXN0aW5nVXNlci5wc2V1ZG8gJiYgIWV4aXN0aW5nVXNlci5wc2V1ZG9DdXN0b21pemVkKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iai5wc2V1ZG8gPSBwcm9maWxlLnVzZXJuYW1lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAocHJvZmlsZS5hdmF0YXIpIHtcclxuICAgICAgICAgICAgY29uc3QgYXZhdGFyVXJsID0gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHtwcm9maWxlLmlkfS8ke3Byb2ZpbGUuYXZhdGFyfS5wbmdgO1xyXG4gICAgICAgICAgICBpZiAoYXZhdGFyVXJsICE9PSBleGlzdGluZ1VzZXIuYXZhdGFyKSB7XHJcbiAgICAgICAgICAgICAgdXBkYXRlT2JqLmF2YXRhciA9IGF2YXRhclVybDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlT2JqKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9iai51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLnVwZGF0ZU9uZShcclxuICAgICAgICAgICAgICB7IGlkdXNlcjogcHJvZmlsZS5pZCB9LFxyXG4gICAgICAgICAgICAgIHsgJHNldDogdXBkYXRlT2JqIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU2lnbiBpbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgLy8gQ29uZmlndXJhdGlvbiBwb3VyIEhUVFBTIGF2ZWMgQ2xvdWRmbGFyZSBUdW5uZWxcclxuICB1c2VTZWN1cmVDb29raWVzOiB0cnVlLFxyXG4gIHRydXN0SG9zdDogdHJ1ZSxcclxuICBjb29raWVzOiB7XHJcbiAgICBzZXNzaW9uVG9rZW46IHtcclxuICAgICAgbmFtZTogYG5leHQtYXV0aC5zZXNzaW9uLXRva2VuYCxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgc2VjdXJlOiB0cnVlIC8vIENvb2tpZXMgdW5pcXVlbWVudCB2aWEgSFRUUFNcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNhbGxiYWNrVXJsOiB7XHJcbiAgICAgIG5hbWU6IGBuZXh0LWF1dGguY2FsbGJhY2stdXJsYCxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgc2VjdXJlOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjc3JmVG9rZW46IHtcclxuICAgICAgbmFtZTogYG5leHQtYXV0aC5jc3JmLXRva2VuYCxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgIHNhbWVTaXRlOiAnbGF4JyxcclxuICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgc2VjdXJlOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHBhZ2VzOiB7XHJcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nLFxyXG4gICAgZXJyb3I6ICcvYXV0aC9lcnJvcicsXHJcbiAgfSxcclxuICBzZXNzaW9uOiB7XHJcbiAgICBzdHJhdGVneTogJ2p3dCcsXHJcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXHJcbiAgfSxcclxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTsiXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJEaXNjb3JkUHJvdmlkZXIiLCJjb25uZWN0VG9EYXRhYmFzZSIsImF1dGhPcHRpb25zIiwicHJvdmlkZXJzIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiRElTQ09SRF9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJESVNDT1JEX0NMSUVOVF9TRUNSRVQiLCJhdXRob3JpemF0aW9uIiwicGFyYW1zIiwic2NvcGUiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsImFjY291bnQiLCJwcm9maWxlIiwiaWQiLCJkaXNjb3JkIiwic2Vzc2lvbiIsInVzZXIiLCJkYiIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiaWR1c2VyIiwiZGJVc2VyIiwiaXNBZG1pbiIsInJvbGUiLCJjb25zb2xlIiwibG9nIiwicHNldWRvIiwiZXJyb3IiLCJzaWduSW4iLCJleGlzdGluZ1VzZXIiLCJpbnNlcnRPbmUiLCJ1c2VybmFtZSIsIm5hbWUiLCJzbGljZSIsImF2YXRhciIsImVsbyIsInZpY3RvcmllcyIsInRvdGFsTWF0Y2hlcyIsIndpblJhdGUiLCJyYW5rIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInVwZGF0ZU9iaiIsInBzZXVkb0N1c3RvbWl6ZWQiLCJhdmF0YXJVcmwiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwidXBkYXRlT25lIiwiJHNldCIsInVzZVNlY3VyZUNvb2tpZXMiLCJ0cnVzdEhvc3QiLCJjb29raWVzIiwic2Vzc2lvblRva2VuIiwib3B0aW9ucyIsImh0dHBPbmx5Iiwic2FtZVNpdGUiLCJwYXRoIiwic2VjdXJlIiwiY2FsbGJhY2tVcmwiLCJjc3JmVG9rZW4iLCJwYWdlcyIsInN0cmF0ZWd5IiwibWF4QWdlIiwic2VjcmV0IiwiTkVYVEFVVEhfU0VDUkVUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/auth/[...nextauth].js"));
module.exports = __webpack_exports__;

})();